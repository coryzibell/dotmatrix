# Session 2025-12-02-01

## Focus
base-d schema encoding - from concept to implementation

## Key Events

### Issue #125: Garbled commit messages
- Investigated commit ddca787 with C1 control characters in title
- Footer showed `[keccak224:|brotli:base45]` - empty dictionary after hash algo
- Raw bytes were UTF-8 encoded U+0080-U+009F (C1 control range)
- Created issue to track - intermittent, can't reproduce locally

### Issue #126: Schema-aware encoding ‚Üí IMPLEMENTED
- Started as TOON-inspired exploration
- Evolved into LLM-to-LLM wire protocol design
- Key insights:
  - Not human-readable schema, but **machine transport** through hostile parsing environments
  - Exotic delimiters (hieroglyphs) so no parser grabs it by accident
  - Display-safe alphabet (96 chars) - no blanks, no confusables
  - Binary-packed schema + values, denser than TOON

### Wire Format Implemented
```
ìçπ‚ï£‚óü‚ï•‚óï‚óù‚ñ∞‚ó£‚ó•‚ñü‚ï∫‚ññ‚óò‚ñ∞‚óù‚ñ§‚óÄ‚ïßìç∫
```
- Frame delimiters: `ìçπ` `ìç∫` (Egyptian hieroglyph quotation marks)
- Payload: display96 alphabet (box drawing, geometric shapes)
- Binary format: varint integers, length-prefixed strings, null bitmap

### Implementation Complete (PR #127 merged)
- Phase 1: Core types & binary format (types.rs, binary_packer.rs, binary_unpacker.rs)
- Phase 2: JSON parser/serializer with IR abstraction (parsers/, serializers/)
- Phase 3: Framing & display96 dictionary (frame.rs, display96.rs)
- Phase 4: CLI integration (`base-d schema`, `base-d schema -d`)
- 402 tests passing

### Phase 5 In Progress
- [x] `--pretty` flag for formatted JSON output
- [x] Better error messages (Morpheus + Persephone)
- [ ] Compression layer (brotli/lz4 before display96)
- [ ] Edge case hardening
- [ ] Documentation

### Orchestration Learning
- Updated orchestration.md and _base.md with agent work styles
- Consultants (Morpheus, Persephone) should ask for scoped context, not explore everything
- Neo's job to scope tightly before dispatch

## Naming Decision: carrier98

**The format is called `carrier98`.**

- 96 alphabet chars + 2 frame delimiters = 98
- Carrier wave - the signal that carries the data
- Ties into Matrix vibe ("trace the signal")
- Data modulation for a new era
- Not different from phone keypad encoding (0-9 DTMF tones), just highly advanced
- Windows 98 nostalgia - machines learning to communicate

## Open Questions
- Compression: optional flag or auto-detect? (resolved: optional flag)
- Future parsers: YAML, CSV, TOML targeting same IR

## Repos Touched
- base-d: schema encoding implemented, PR #127 merged
- dotmatrix: orchestration docs updated
