metadata:
  title: Add Vitest testing infrastructure with example test
  type: issue
  labels:
  - identity:deus
  - enhancement
  - reliability
  assignees: []
  milestone: null
  github_issue_number: 7
  last_synced:
    title: Add Vitest testing infrastructure with example test
    body: "# Add Vitest testing infrastructure with example test\n\n\n\n\n\n\nFrom\
      \ Construct review of `veoci-app-template-construct`. Deus flagged 0% test coverage;\
      \ Spoon reframed that testing placeholder code is cargo cult, but test infrastructure\
      \ is valuable.\n\n**Sources:**\n- `~/.claude/cache/construct/veoci-app-template-construct/test-recommendations.md`\n\
      - `~/.claude/cache/construct/veoci-app-template-construct/perspective-spoon.md`\n\
      \n## Problem\n\nThe template has zero test infrastructure:\n- No test framework\
      \ installed\n- No test scripts in package.json\n- No example of how to test\
      \ Veoci integrations\n- Developers don't know how to mock VeociJS SDK\n\nThis\
      \ doesn't mean we need comprehensive tests for placeholder code. But the template\
      \ should demonstrate HOW to test.\n\n## Solution\n\nInstall Vitest with Vue/Pinia\
      \ support and add ONE example test showing mocking patterns.\n\n## Implementation\
      \ Steps\n\n1. Install dependencies:\n   ```bash\n   npm install -D vitest @vue/test-utils\
      \ @pinia/testing happy-dom\n   ```\n\n2. Create `vitest.config.ts`:\n   ```typescript\n\
      \   import { defineConfig } from 'vitest/config'\n   import vue from '@vitejs/plugin-vue'\n\
      \n   export default defineConfig({\n     plugins: [vue()],\n     test: {\n \
      \      globals: true,\n       environment: 'happy-dom',\n       setupFiles:\
      \ ['./tests/setup.ts'],\n     },\n     resolve: {\n       alias: {\n       \
      \  '@': '/src',\n       },\n     },\n   })\n   ```\n\n3. Create `tests/setup.ts`:\n\
      \   ```typescript\n   import { config } from '@vue/test-utils'\n   import {\
      \ createTestingPinia } from '@pinia/testing'\n\n   // Global test setup\n  \
      \ config.global.plugins = [createTestingPinia()]\n   ```\n\n4. Create example\
      \ test `tests/unit/stores/auth.spec.ts`:\n   ```typescript\n   import { describe,\
      \ it, expect, vi, beforeEach } from 'vitest'\n   import { setActivePinia, createPinia\
      \ } from 'pinia'\n   import { useAuthStore } from '@/store/auth'\n\n   // Mock\
      \ VeociJS SDK\n   vi.mock('@GreywallSoftware/veoci-js', () => ({\n     VeociSDK:\
      \ vi.fn().mockImplementation(() => ({\n       auth: {\n         login: vi.fn().mockResolvedValue({\
      \ authToken: 'mock-token' }),\n         logout: vi.fn().mockResolvedValue(undefined),\n\
      \       },\n     })),\n   }))\n\n   describe('Auth Store', () => {\n     beforeEach(()\
      \ => {\n       setActivePinia(createPinia())\n       localStorage.clear()\n\
      \     })\n\n     it('should initialize as not authenticated', () => {\n    \
      \   const store = useAuthStore()\n       expect(store.isAuthenticated).toBe(false)\n\
      \     })\n\n     it('should store token in localStorage on login', async ()\
      \ => {\n       const store = useAuthStore()\n       // This test demonstrates\
      \ the pattern - actual implementation\n       // depends on store structure\n\
      \       expect(localStorage.getItem('authToken')).toBeNull()\n     })\n   })\n\
      \   ```\n\n5. Add scripts to `package.json`:\n   ```json\n   {\n     \"scripts\"\
      : {\n       \"test\": \"vitest\",\n       \"test:run\": \"vitest run\",\n  \
      \     \"test:coverage\": \"vitest run --coverage\"\n     }\n   }\n   ```\n\n\
      6. Add to README:\n   ```markdown\n   ## Testing\n\n   ```bash\n   npm run test\
      \        # Watch mode\n   npm run test:run    # Single run\n   npm run test:coverage\
      \  # With coverage\n   ```\n\n   See `tests/unit/stores/auth.spec.ts` for example\
      \ of mocking VeociJS SDK.\n   ```\n\n## Acceptance Criteria\n\n- [ ] Vitest\
      \ installed and configured\n- [ ] `npm run test` works\n- [ ] Example test demonstrates\
      \ VeociJS mocking pattern\n- [ ] README documents testing approach\n- [ ] Coverage\
      \ report available via `npm run test:coverage`\n\n## Handoff\n\nDeus implements\
      \ and verifies test infrastructure works correctly."
    labels:
    - enhancement
    - identity:deus
    - reliability
    github_updated_at: '2025-11-27T00:29:54Z'
    assignees: []
body_markdown: "# Add Vitest testing infrastructure with example test\n\n\n\n\n\n\n\
  From Construct review of `veoci-app-template-construct`. Deus flagged 0% test coverage;\
  \ Spoon reframed that testing placeholder code is cargo cult, but test infrastructure\
  \ is valuable.\n\n**Sources:**\n- `~/.claude/cache/construct/veoci-app-template-construct/test-recommendations.md`\n\
  - `~/.claude/cache/construct/veoci-app-template-construct/perspective-spoon.md`\n\
  \n## Problem\n\nThe template has zero test infrastructure:\n- No test framework\
  \ installed\n- No test scripts in package.json\n- No example of how to test Veoci\
  \ integrations\n- Developers don't know how to mock VeociJS SDK\n\nThis doesn't\
  \ mean we need comprehensive tests for placeholder code. But the template should\
  \ demonstrate HOW to test.\n\n## Solution\n\nInstall Vitest with Vue/Pinia support\
  \ and add ONE example test showing mocking patterns.\n\n## Implementation Steps\n\
  \n1. Install dependencies:\n   ```bash\n   npm install -D vitest @vue/test-utils\
  \ @pinia/testing happy-dom\n   ```\n\n2. Create `vitest.config.ts`:\n   ```typescript\n\
  \   import { defineConfig } from 'vitest/config'\n   import vue from '@vitejs/plugin-vue'\n\
  \n   export default defineConfig({\n     plugins: [vue()],\n     test: {\n     \
  \  globals: true,\n       environment: 'happy-dom',\n       setupFiles: ['./tests/setup.ts'],\n\
  \     },\n     resolve: {\n       alias: {\n         '@': '/src',\n       },\n \
  \    },\n   })\n   ```\n\n3. Create `tests/setup.ts`:\n   ```typescript\n   import\
  \ { config } from '@vue/test-utils'\n   import { createTestingPinia } from '@pinia/testing'\n\
  \n   // Global test setup\n   config.global.plugins = [createTestingPinia()]\n \
  \  ```\n\n4. Create example test `tests/unit/stores/auth.spec.ts`:\n   ```typescript\n\
  \   import { describe, it, expect, vi, beforeEach } from 'vitest'\n   import { setActivePinia,\
  \ createPinia } from 'pinia'\n   import { useAuthStore } from '@/store/auth'\n\n\
  \   // Mock VeociJS SDK\n   vi.mock('@GreywallSoftware/veoci-js', () => ({\n   \
  \  VeociSDK: vi.fn().mockImplementation(() => ({\n       auth: {\n         login:\
  \ vi.fn().mockResolvedValue({ authToken: 'mock-token' }),\n         logout: vi.fn().mockResolvedValue(undefined),\n\
  \       },\n     })),\n   }))\n\n   describe('Auth Store', () => {\n     beforeEach(()\
  \ => {\n       setActivePinia(createPinia())\n       localStorage.clear()\n    \
  \ })\n\n     it('should initialize as not authenticated', () => {\n       const\
  \ store = useAuthStore()\n       expect(store.isAuthenticated).toBe(false)\n   \
  \  })\n\n     it('should store token in localStorage on login', async () => {\n\
  \       const store = useAuthStore()\n       // This test demonstrates the pattern\
  \ - actual implementation\n       // depends on store structure\n       expect(localStorage.getItem('authToken')).toBeNull()\n\
  \     })\n   })\n   ```\n\n5. Add scripts to `package.json`:\n   ```json\n   {\n\
  \     \"scripts\": {\n       \"test\": \"vitest\",\n       \"test:run\": \"vitest\
  \ run\",\n       \"test:coverage\": \"vitest run --coverage\"\n     }\n   }\n  \
  \ ```\n\n6. Add to README:\n   ```markdown\n   ## Testing\n\n   ```bash\n   npm\
  \ run test        # Watch mode\n   npm run test:run    # Single run\n   npm run\
  \ test:coverage  # With coverage\n   ```\n\n   See `tests/unit/stores/auth.spec.ts`\
  \ for example of mocking VeociJS SDK.\n   ```\n\n## Acceptance Criteria\n\n- [ ]\
  \ Vitest installed and configured\n- [ ] `npm run test` works\n- [ ] Example test\
  \ demonstrates VeociJS mocking pattern\n- [ ] README documents testing approach\n\
  - [ ] Coverage report available via `npm run test:coverage`\n\n## Handoff\n\nDeus\
  \ implements and verifies test infrastructure works correctly."
