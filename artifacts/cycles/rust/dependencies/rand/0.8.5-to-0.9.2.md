# rand: 0.8.5 → 0.9.2

**Released:** January 2025
**Type:** MAJOR (Breaking)
**Risk:** MEDIUM
**Edition:** Rust 2024 compatible

## Key Breaking Changes

### 1. Method Renames (Rust 2024 Edition)

In Edition 2024, `gen` is a reserved keyword. Methods renamed to avoid raw syntax `r#gen()`:

| Old (0.8) | New (0.9) | Status |
|-----------|-----------|--------|
| `gen()` | `random()` | Old deprecated |
| `gen_range()` | `random_range()` | Old deprecated |
| `gen_bool()` | `random_bool()` | Old deprecated |
| `gen_ratio()` | `random_ratio()` | Old deprecated |

Additionally:
- `thread_rng()` → `rng()` (simplified name, old deprecated)

**Migration:** Old names still work but are deprecated. Update to new names for Edition 2024.

### 2. Module and Type Renames

**Modules:**
- `rand::distributions` → `rand::distr` (brevity, matches rand_distr)

**Types:**
- `Standard` → `StandardUniform`
- `distr::Slice` → `distr::slice::Choose`
- `distr::EmptySlice` → `distr::slice::Empty`
- `distr::DistString` → `distr::SampleString`
- `distr::DistIter` → `distr::Iter`
- `distr::DistMap` → `distr::Map`

### 3. Trait Changes

**Split Trait:**
- `SliceRandom` split into:
  - `IndexedRandom`
  - `IndexedMutRandom`
  - `SliceRandom`

**New Trait:**
- `TryRngCore` added (generic over fallible/infallible RNGs)
- `RngCore` now only represents infallible RNGs
- `CryptoRng` is now a sub-trait of `RngCore`

### 4. Distribution Changes

**Removed Support:**
- `StandardUniform` no longer supports `Option<T>`
- `isize`/`usize` not supported by:
  - `Fill`
  - `WeightedAliasIndex`
  - `StandardUniform`
- `isize` not supported by `Uniform`

**Portable usize:**
- `usize` supported by `Uniform` through `UniformUsize`
- Now has portable results across 32/64-bit platforms

**Constructor Changes:**
- `Uniform::new()` and `new_inclusive()` now return `Result` (no panic)
- `Uniform` now uses `TryFrom` instead of `From` for range types

### 5. Dependencies and Features

**getrandom:**
- Bumped to 0.3 (breaking for some platforms, especially WASM)

**Features:**
- Removed implicit `rand_chacha` feature
- Use `std_rng` instead

**Fork Protection:**
- Removed from `ReseedingRng` and `ThreadRng`
- Call `ThreadRng::reseed()` manually on fork

### 6. MSRV

**Minimum Rust:** 1.63.0

## Migration Checklist

- [ ] Update method calls: `gen()` → `random()`, etc.
- [ ] Update module imports: `distributions` → `distr`
- [ ] Update type names: `Standard` → `StandardUniform`
- [ ] Check for `Option<T>` sampling (no longer supported)
- [ ] Check for `isize`/`usize` usage in distributions
- [ ] Update `Uniform` constructors to handle `Result`
- [ ] Replace `rand_chacha` feature with `std_rng`
- [ ] If targeting WASM: review getrandom 0.3 changes
- [ ] If using fork protection: implement manual `ThreadRng::reseed()`

## base-d Usage

base-d uses rand for random number generation (likely simple cases).

**Expected Changes:**
- `gen()` → `random()`
- `gen_range()` → `random_range()`
- Module imports update

**Action:** Update method calls, test random generation works.

## References

- [Official Migration Guide](https://rust-random.github.io/book/update-0.9.html)
- [rand 0.9.2 on docs.rs](https://docs.rs/crate/rand/latest)
- [rand on crates.io](https://crates.io/crates/rand/0.8.5)

---
**Cached:** 2025-11-29
**Sources:** [The Rust Rand Book](https://rust-random.github.io/book/update-0.9.html)
