# brotli: 7.0.0 â†’ 8.0.2

**Released:** ~6 months ago (May 2025)
**Type:** MAJOR (Breaking)
**Risk:** MEDIUM

## Breaking Changes

### FFI No Longer Active by Default

The primary breaking change is that FFI is now disabled by default to avoid ODR (One Definition Rule) issues when multiple versions of brotli are included in dependent crates.

**Impact:** If your code uses FFI functionality, it will break.

**Fix:** Enable the `ffi-api` feature flag:

```toml
[dependencies]
brotli = { version = "8.0", features = ["ffi-api"] }
```

### Symbol Conflict Prevention

The crate is now pinned to rust-brotli-decompressor with the ability to disable FFI via the `ffi-api` flag. This helps avoid symbol conflicts with other brotli libraries.

## Migration Checklist

- [ ] Check if your code uses FFI functionality
- [ ] If yes, add `features = ["ffi-api"]` to dependency
- [ ] If no, update version directly
- [ ] Test compression/decompression still works
- [ ] Verify no symbol conflicts in build

## base-d Usage

base-d uses brotli for compression support only (no FFI). Direct upgrade should be safe.

**Action:** Update to 8.0.2 without feature flags.

## References

- [brotli crate on crates.io](https://crates.io/crates/brotli)
- [brotli 8.0.2 docs](https://docs.rs/brotli/8.0.2/brotli/)

## Upstream Note

Dropbox upstream has been ignoring pull requests and issues since packaging for Fedora. Multiple breaking releases have occurred recently. Monitor for future instability.

---
**Cached:** 2025-11-29
**Sources:** Web search, crates.io
